---
import BaseLayout from '../layouts/BaseLayout.astro';
import { siteConfig } from '../config/site';

const title = 'Política de Cookies';
const description = 'Información sobre el uso de cookies en nuestro sitio web. Conoce qué cookies utilizamos y cómo puedes gestionarlas.';
---

<BaseLayout title={title} description={description}>
  <main class="min-h-screen bg-white">
    <!-- Header Section -->
    <section class="pt-24 pb-12 bg-gradient-to-b from-neutral-50 to-white">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto text-center">
          <h1 class="text-4xl md:text-5xl font-bold text-neutral-900 mb-6">
            Política de Cookies
          </h1>
          <p class="text-xl text-neutral-600 leading-relaxed">
            Última actualización: {new Date().toLocaleDateString('es-ES', { 
              year: 'numeric', 
              month: 'long', 
              day: 'numeric' 
            })}
          </p>
        </div>
      </div>
    </section>

    <!-- Content Section -->
    <section class="py-16">
      <div class="container mx-auto px-4">
        <div class="max-w-4xl mx-auto">
          <div class="prose prose-lg max-w-none">
            
            <!-- Qué son las cookies -->
            <div class="mb-12">
              <h2 class="text-2xl font-bold text-neutral-900 mb-6">1. ¿Qué son las Cookies?</h2>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Las cookies son pequeños archivos de texto que se almacenan en tu dispositivo cuando 
                visitas un sitio web. Estas nos permiten recordar tus preferencias y mejorar tu experiencia 
                de navegación en futuras visitas.
              </p>
              <p class="text-neutral-700 leading-relaxed">
                En <strong>{siteConfig.name}</strong> utilizamos cookies para ofrecer funcionalidades 
                esenciales y analizar cómo interactúas con nuestro sitio web.
              </p>
            </div>

            <!-- Tipos de cookies -->
            <div class="mb-12">
              <h2 class="text-2xl font-bold text-neutral-900 mb-6">2. Tipos de Cookies que Utilizamos</h2>

              <h3 class="text-xl font-semibold text-neutral-800 mb-4">2.1 Cookies Esenciales</h3>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Son necesarias para el funcionamiento básico del sitio web y no se pueden desactivar. <br>
                <strong>No utilizamos cookies de login ni autenticación de usuario.</strong>
              </p>
              <ul class="list-disc pl-6 mb-6 text-neutral-700 space-y-2">
                <li>Cookies de sesión para mantener la navegación (sin login)</li>
                <li>Cookies de seguridad para proteger contra ataques</li>
                <li>Cookies de funcionalidad para recordar tus preferencias (idioma, accesibilidad)</li>
              </ul>

              <h3 class="text-xl font-semibold text-neutral-800 mb-4">2.2 Cookies Analíticas</h3>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Nos ayudan a entender cómo los visitantes interactúan con nuestro sitio web:
              </p>
              <ul class="list-disc pl-6 mb-6 text-neutral-700 space-y-2">
                <li><strong>Google Analytics:</strong> Para estadísticas de uso y rendimiento</li>
                <li><strong>Performance:</strong> Para medir la velocidad y optimización</li>
                <li><strong>Comportamiento:</strong> Para entender patrones de navegación</li>
              </ul>

              <h3 class="text-xl font-semibold text-neutral-800 mb-4">2.3 Cookies de Funcionalidad</h3>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Mejoran tu experiencia recordando tus elecciones:
              </p>
              <ul class="list-disc pl-6 mb-6 text-neutral-700 space-y-2">
                <li>Preferencias de idioma</li>
                <li>Configuración de accesibilidad</li>
                <li>Datos de formularios (si eliges recordarlos)</li>
              </ul>

              <h3 class="text-xl font-semibold text-neutral-800 mb-4">2.4 Cookies de Marketing</h3>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Con tu consentimiento, pueden utilizarse para:
              </p>
              <ul class="list-disc pl-6 mb-6 text-neutral-700 space-y-2">
                <li>Mostrar contenido personalizado</li>
                <li>Recordar tus intereses</li>
                <li>Mejorar la relevancia de nuestras comunicaciones</li>
              </ul>
            </div>

            <!-- Cookies específicas -->
            <div class="mb-12">
              <h2 class="text-2xl font-bold text-neutral-900 mb-6">3. Cookies Específicas Utilizadas</h2>
              <div class="overflow-x-auto">
                <table class="min-w-full bg-white border border-neutral-200">
                  <thead class="bg-neutral-50">
                    <tr>
                      <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">
                        Nombre
                      </th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">
                        Propósito
                      </th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-neutral-500 uppercase tracking-wider">
                        Duración
                      </th>
                    </tr>
                  </thead>
                  <tbody class="divide-y divide-neutral-200">
                    <tr>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-neutral-900">
                        _ga
                      </td>
                      <td class="px-6 py-4 text-sm text-neutral-700">
                        Google Analytics - Distinguir usuarios únicos
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-700">
                        2 años
                      </td>
                    </tr>
                    <tr class="bg-neutral-50">
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-neutral-900">
                        _ga_[ID]
                      </td>
                      <td class="px-6 py-4 text-sm text-neutral-700">
                        Google Analytics 4 - Estado de sesión persistente
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-700">
                        2 años
                      </td>
                    </tr>
                    <tr>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-neutral-900">
                        _gid
                      </td>
                      <td class="px-6 py-4 text-sm text-neutral-700">
                        Google Analytics - Distinguir usuarios únicos
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-neutral-700">
                        1 día
                      </td>
                    </tr>
                    <!-- Eliminado cookie de login/autenticación -->
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Cómo gestionar cookies -->
            <div class="mb-12">
              <h2 class="text-2xl font-bold text-neutral-900 mb-6">4. Cómo Gestionar las Cookies</h2>
              
              <h3 class="text-xl font-semibold text-neutral-800 mb-4">4.1 Configuración del Navegador</h3>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Puedes controlar y eliminar cookies a través de la configuración de tu navegador:
              </p>
              
              <div class="grid md:grid-cols-2 gap-6 mb-6">
                <div class="bg-neutral-50 p-4 rounded-lg">
                  <h4 class="font-semibold text-neutral-800 mb-2">Chrome</h4>
                  <p class="text-sm text-neutral-600">
                    Configuración → Privacidad y seguridad → Cookies y otros datos de sitios
                  </p>
                </div>
                <div class="bg-neutral-50 p-4 rounded-lg">
                  <h4 class="font-semibold text-neutral-800 mb-2">Firefox</h4>
                  <p class="text-sm text-neutral-600">
                    Opciones → Privacidad y seguridad → Cookies y datos del sitio
                  </p>
                </div>
                <div class="bg-neutral-50 p-4 rounded-lg">
                  <h4 class="font-semibold text-neutral-800 mb-2">Safari</h4>
                  <p class="text-sm text-neutral-600">
                    Preferencias → Privacidad → Gestionar datos de sitios web
                  </p>
                </div>
                <div class="bg-neutral-50 p-4 rounded-lg">
                  <h4 class="font-semibold text-neutral-800 mb-2">Edge</h4>
                  <p class="text-sm text-neutral-600">
                    Configuración → Privacidad → Cookies y permisos de sitio
                  </p>
                </div>
              </div>

              <h3 class="text-xl font-semibold text-neutral-800 mb-4">4.2 Nuestro Panel de Preferencias</h3>
              <p class="text-neutral-700 leading-relaxed mb-4">
                También puedes gestionar tus preferencias de cookies directamente desde nuestro sitio. <br>
                <strong>No almacenamos datos personales ni credenciales de usuario.</strong>
              </p>
              <div class="bg-blue-50 border-l-4 border-blue-400 p-4 mb-6">
                <p class="text-blue-700">
                  <strong>Nota:</strong> Desactivar ciertos tipos de cookies puede afectar tu experiencia 
                  en el sitio web y limitar algunas funcionalidades.
                </p>
              </div>
            </div>

            <!-- Cookies de terceros -->
            <div class="mb-12">
              <h2 class="text-2xl font-bold text-neutral-900 mb-6">5. Cookies de Terceros</h2>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Algunos servicios externos que utilizamos también pueden establecer cookies:
              </p>
              
              <h3 class="text-xl font-semibold text-neutral-800 mb-4">5.1 Google Analytics</h3>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Utilizamos Google Analytics para entender cómo los usuarios interactúan con nuestro sitio. 
                Puedes optar por no participar visitando: 
                <a href="https://tools.google.com/dlpage/gaoptout" target="_blank" rel="noopener" 
                   class="text-blue-600 hover:text-blue-800 underline">
                  Google Analytics Opt-out
                </a>
              </p>

              <h3 class="text-xl font-semibold text-neutral-800 mb-4">5.2 Google Tag Manager</h3>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Para gestionar de forma eficiente los scripts de análisis y marketing en nuestro sitio web.
              </p>
            </div>

            <!-- Cambios en la política -->
            <div class="mb-12">
              <h2 class="text-2xl font-bold text-neutral-900 mb-6">6. Cambios en esta Política</h2>
              <p class="text-neutral-700 leading-relaxed">
                Podemos actualizar esta Política de Cookies ocasionalmente para reflejar cambios en 
                nuestras prácticas o por razones operativas, legales o regulatorias. Te notificaremos 
                sobre cambios significativos a través de nuestro sitio web.
              </p>
            </div>

            <!-- Contacto -->
            <div class="mb-12">
              <h2 class="text-2xl font-bold text-neutral-900 mb-6">7. Contacto</h2>
              <p class="text-neutral-700 leading-relaxed mb-4">
                Si tienes preguntas sobre nuestra Política de Cookies, puedes contactarnos:
              </p>
              <div class="bg-neutral-50 p-6 rounded-lg">
                <p class="text-neutral-700"><strong>Email:</strong> cookies@{siteConfig.domain}</p>
                <p class="text-neutral-700"><strong>Teléfono:</strong> {siteConfig.phone}</p>
                <p class="text-neutral-700"><strong>Dirección:</strong> [Tu dirección física]</p>
              </div>
            </div>

          </div>

          <!-- Cookie Preferences Panel -->
          <div class="mt-16">
            <div class="bg-neutral-900 rounded-2xl p-8 text-white">
              <h3 class="text-2xl font-bold mb-4">Gestionar Preferencias de Cookies</h3>
              <p class="text-neutral-300 mb-6">
                Puedes cambiar tus preferencias de cookies en cualquier momento desde aquí.
              </p>
              <div class="space-y-4">
                <div class="flex items-center justify-between p-4 bg-neutral-800 rounded-lg">
                  <div>
                    <h4 class="font-semibold">Cookies Esenciales</h4>
                    <p class="text-sm text-neutral-400">Siempre activadas - Necesarias para el funcionamiento</p>
                  </div>
                  <div class="text-green-400">
                    ✓ Activadas
                  </div>
                </div>
                <div class="flex items-center justify-between p-4 bg-neutral-800 rounded-lg">
                  <div>
                    <h4 class="font-semibold">Cookies Analíticas</h4>
                    <p class="text-sm text-neutral-400">Nos ayudan a mejorar el sitio web</p>
                  </div>
                  <label class="flex items-center space-x-2">
                    <input type="checkbox" class="toggle-analytics" checked>
                    <span class="text-sm">Permitir</span>
                  </label>
                </div>
                <div class="flex items-center justify-between p-4 bg-neutral-800 rounded-lg">
                  <div>
                    <h4 class="font-semibold">Cookies de Marketing</h4>
                    <p class="text-sm text-neutral-400">Para personalizar contenido</p>
                  </div>
                  <label class="flex items-center space-x-2">
                    <input type="checkbox" class="toggle-marketing">
                    <span class="text-sm">Permitir</span>
                  </label>
                </div>
              </div>
              <div class="mt-6 text-center">
                <button class="bg-white text-neutral-900 px-6 py-3 rounded-lg font-semibold hover:bg-neutral-100 transition-colors">
                  Guardar Preferencias
                </button>
              </div>
            </div>
          </div>

        </div>
      </div>
    </section>
  </main>
</BaseLayout>

<style>
  /* Estilos específicos para cookies */
  .prose h2 {
    @apply border-b border-neutral-200 pb-2;
  }
  
  .prose table {
    @apply rounded-lg overflow-hidden border border-neutral-200;
  }
  
  .prose th {
    @apply bg-neutral-50 font-semibold;
  }
  
  .prose a {
    @apply text-blue-600 hover:text-blue-800 underline;
  }

  /* Toggle styles */
  input[type="checkbox"] {
    @apply w-4 h-4 text-blue-600 bg-neutral-700 border-neutral-600 rounded focus:ring-blue-500;
  }
</style>

<script>
  // Simple cookie preferences manager
  document.addEventListener('DOMContentLoaded', () => {
  const analyticsToggle = document.querySelector('.toggle-analytics') as HTMLInputElement | null;
  const marketingToggle = document.querySelector('.toggle-marketing') as HTMLInputElement | null;
    const saveButton = document.querySelector('button');

    // Load saved preferences
    const savedPrefs = JSON.parse(localStorage.getItem('cookiePreferences') || '{}');
  if (analyticsToggle) analyticsToggle.checked = savedPrefs.analytics !== false;
  if (marketingToggle) marketingToggle.checked = savedPrefs.marketing === true;

    // Save preferences
    saveButton?.addEventListener('click', () => {
      const preferences = {
        analytics: (analyticsToggle as HTMLInputElement | null)?.checked || false,
        marketing: (marketingToggle as HTMLInputElement | null)?.checked || false,
        timestamp: Date.now()
      };
      
      localStorage.setItem('cookiePreferences', JSON.stringify(preferences));
      
      // Show confirmation
      const originalText = saveButton.textContent;
      saveButton.textContent = '✓ Guardado';
      setTimeout(() => {
        saveButton.textContent = originalText;
      }, 2000);
    });
  });
</script>
