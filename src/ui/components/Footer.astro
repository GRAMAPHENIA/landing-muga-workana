---
/**
 * Componente Footer con versionado automático desde CHANGELOG.md
 * Requirement: 4.1, 4.2 - Footer con versión automática
 * Requirement: 7.4 - Enlaces de footer y redes sociales configurables
 */

import { siteConfig } from '../../infrastructure/config/site.config';
import {
  getCurrentVersion,
  formatVersion,
} from '../../infrastructure/utils/changelog-parser';

// Obtener la versión actual del CHANGELOG.md
const currentVersion = getCurrentVersion(siteConfig.version.changelogPath);
const formattedVersion = formatVersion(
  currentVersion,
  siteConfig.version.displayFormat
);

// Función para capitalizar el nombre de la plataforma
function capitalizePlatform(platform: string): string {
  return platform.charAt(0).toUpperCase() + platform.slice(1);
}
---

<footer class="bg-gray-900 text-white">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <!-- Enlaces principales del footer -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
      {
        siteConfig.footer.links.map(section => (
          <div>
            <h3 class="text-sm font-semibold text-gray-300 uppercase tracking-wider mb-4">
              {section.title}
            </h3>
            <ul class="space-y-3">
              {section.links.map(link => (
                <li>
                  <a
                    href={link.href}
                    class="text-gray-400 hover:text-white transition-colors duration-200"
                    aria-label={link.ariaLabel || link.label}
                    target={link.external ? '_blank' : undefined}
                    rel={link.external ? 'noopener noreferrer' : undefined}
                  >
                    {link.label}
                  </a>
                </li>
              ))}
            </ul>
          </div>
        ))
      }
    </div>

    <!-- Separador -->
    <div class="border-t border-gray-800 pt-8">
      <div
        class="flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0"
      >
        <!-- Copyright y versión -->
        <div
          class="flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-4"
        >
          <p class="text-gray-400 text-sm">
            {siteConfig.footer.copyright}
          </p>

          {
            siteConfig.footer.showVersion &&
              siteConfig.version.showInFooter && (
                <span class="text-gray-500 text-xs px-2 py-1 bg-gray-800 rounded-md font-mono">
                  {formattedVersion}
                </span>
              )
          }
        </div>

        <!-- Redes sociales -->
        {
          siteConfig.footer.social.length > 0 && (
            <div class="flex space-x-6">
              {siteConfig.footer.social.map(social => (
                <a
                  href={social.url}
                  class="text-gray-400 hover:text-white transition-colors duration-200 px-3 py-2 rounded-md hover:bg-gray-800"
                  aria-label={
                    social.ariaLabel ||
                    `Síguenos en ${capitalizePlatform(social.platform)}`
                  }
                  target="_blank"
                  rel="noopener noreferrer"
                >
                  <span class="text-sm font-medium">
                    {capitalizePlatform(social.platform)}
                  </span>
                </a>
              ))}
            </div>
          )
        }
      </div>
    </div>
  </div>
</footer>

<style>
  /* Estilos adicionales para mejorar la accesibilidad */
  footer a:focus {
    outline: 2px solid #3b82f6;
    outline-offset: 2px;
  }

  /* Animación suave para los enlaces */
  footer a {
    transition:
      color 0.2s ease-in-out,
      background-color 0.2s ease-in-out;
  }

  /* Mejora visual para la versión */
  footer .font-mono {
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  }
</style>
